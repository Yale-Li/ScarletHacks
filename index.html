<!doctype html>
<html class="no-js" lang="en">

    <head>
        <!-- meta data -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

        <!--font-family-->
		<link href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
        
        <!-- title of site -->
        <title>Adoptable Pets</title>

        <!-- For favicon png -->
		<link rel="shortcut icon" type="image/icon" href="assets/logo/favicon.png"/>
       
        <!--font-awesome.min.css-->
        <link rel="stylesheet" href="assets/css/font-awesome.min.css">

        <!--linear icon css-->
		<link rel="stylesheet" href="assets/css/linearicons.css">

		<!--animate.css-->
        <link rel="stylesheet" href="assets/css/animate.css">

		<!--flaticon.css-->
        <link rel="stylesheet" href="assets/css/flaticon.css">

		<!--slick.css-->
        <link rel="stylesheet" href="assets/css/slick.css">
		<link rel="stylesheet" href="assets/css/slick-theme.css">
		
        <!--bootstrap.min.css-->
        <link rel="stylesheet" href="assets/css/bootstrap.min.css">
		
		<!-- bootsnav -->
		<link rel="stylesheet" href="assets/css/bootsnav.css" >	
        
        <!--style.css-->
        <link rel="stylesheet" href="assets/css/style.css">
        
        <!--responsive.css-->
        <link rel="stylesheet" href="assets/css/responsive.css">
        
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		
        <!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

    </head>


		<!--welcome-hero start -->
		<section id="home" class="welcome-hero">
			<div class="container">
				<div class="welcome-hero-txt">
					<h2 style="color:white;">
                        Discover Your Perfect Pet Companion! üêà</h2>
					<p><a href="https://emoji.gg/emoji/4957-white-paw-prints"><img src="https://cdn3.emoji.gg/emojis/4957-white-paw-prints.png" width="64px" height="64px" alt="white_paw_prints"></a>Are you ready to embark on a delightful journey with a furry friend? <br>  Look no further!
					</p>
				</div>
				<div class="welcome-hero-serch-box">
					<div class="welcome-hero-form">
						<div class="single-welcome-hero-form">
							<h3>what?</h3>
							<form action="index.html">
								<input id="searchInput_what" type="text" placeholder="Ex: cat, dog" />
							</form>
							<div class="welcome-hero-form-icon">
								<i class="flaticon-list-with-dots"></i>
							</div>
						</div>
						<div class="single-welcome-hero-form">
							<h3>location</h3>
							<form action="index.html">
								<input id="searchInput_location" type="text" placeholder="Ex: Chicago, zip" />
							</form>
						</div>
					</div>
					<div class="welcome-hero-serch">
						<button type="button" id="searchButton" class="welcome-hero-btn" onclick="performSearch()">
							 search  <i data-feather="search"></i> 
						</button>
					</div>
				</div>
			</div>

		</section><!--/.welcome-hero-->
		<!--welcome-hero end -->
        
        <!--list-topics start -->
		<section id="list-topics" class="list-topics">
			<div class="container">
				<div id="list-topics-content" class="list-topics-content">
                    
				</div>
			</div><!--/.container-->

		</section><!--/.list-topics-->
		<!--list-topics end-->


    <div class="pet-list" id="petList">
        <!-- Results will be dynamically added here -->
    </div>

    		<!--footer start-->
		<footer id="footer"  class="footer">
			<div class="container">
				<div class="footer-menu">
		           	<div class="row">
			           	<div class="col-sm-3">
			           		 <div class="navbar-header">
				                <a class="navbar-brand" href="index.html">Adoptable<span>Pets</span></a>
				            </div><!--/.navbar-header-->
			           	</div>
			           	<div class="col-sm-9">
			           		<ul class="footer-menu-item">
			                    <li class="scroll"><a href="index.html">how it works</a></li>
			                    <li class="scroll"><a href="index.html">explore</a></li>
			                    <li class="scroll"><a href="index.html">review</a></li>
			                    <li class="scroll"><a href="index.html">pets</a></li>
			                    <li class="scroll"><a href="index.html">contact</a></li>
			                    <li class=" scroll"><a href="index.html">my profile</a></li>
			                </ul><!--/.nav -->
			           	</div>
		           </div>
				</div>
				<div class="hm-footer-copyright">
					<div class="row">
						<div class="col-sm-5">
							<p>
								&copy;copyright. designed and developed by <a href="index.html">Xiaoting & Yale's Group</a>
							</p><!--/p-->
						</div>
						<div class="col-sm-7">
							<div class="footer-social">
								<span><i class="fa fa-phone"> +1  (000) 000 xxxx</i></span>
								<a href="#"><i class="fa fa-facebook"></i></a>	
								<a href="#"><i class="fa fa-twitter"></i></a>
								<a href="#"><i class="fa fa-linkedin"></i></a>
								<a href="#"><i class="fa fa-google-plus"></i></a>
							</div>
						</div>
					</div>
					
				</div><!--/.hm-footer-copyright-->
			</div><!--/.container-->

			<div id="scroll-Top">
				<div class="return-to-top">
					<i class="fa fa-angle-up " id="scroll-top" data-toggle="tooltip" data-placement="top" title="" data-original-title="Back to Top" aria-hidden="true"></i>
				</div>
				
			</div><!--/.scroll-Top-->
			
        </footer><!--/.footer-->
		<!--footer end-->

    <script>
        // Create an empty array to hold dictionaries
        const pets = [];

        // Fetch data from the AdoptAPet API
        async function fetchData() {
            try {
                const response = await fetch('https://api-staging.adoptapet.com/search/pet_search?key=hg4nsv85lppeoqqixy3tnlt3k8lj6o0c&v=3&output=json&city_or_zip=60616&geo_range=50&species=dog&breed_id=real=801&sex=m&age=young&color_id=54&pet_size_range_id=2&hair=&bonded_pair=&special_needs=&include_mixes=&added_after=&start_number=1&end_number=50&meta_only=0');
                if (response.ok) {
                    const data = await response.json();
                    displayData(data);
                } else {
                    console.error('API call failed with status code:', response.status);
                }
            } catch (error) {
                console.error('Error occurred during API call:', error);
            }
        }

        // Display the fetched data
        function displayData(data) {
            const formattedData = JSON.stringify(data, null, 2); // Pretty-print the JSON data
            // Parse the JSON string into a JavaScript object
            const parsedData = JSON.parse(formattedData);

            // Search for a specific field (e.g., "name")
            const targetField = parsedData.pets;

            // Add dictionaries (objects) to the array
            for (let value of targetField) {
                const myDictionary = {
                    name: value.pet_name,
                    breed: value.primary_breed,
                    photoUrl: value.results_photo_url,
                    detailsUrl: value.details_url,
                };
                pets.push(myDictionary);
            }

            // apiResultsDiv.textContent = formattedData;

            // Get the parent container where the listings will be displayed
            const listingsContainer = document.getElementById('list-topics-content');
            const petul = document.createElement('ul');

            // Iterate through the listings and create the HTML structure
            pets.forEach(pet => {
                const listItem = document.createElement('li');
                details_url = encodeURIComponent(pet.detailsUrl);
                a_href = './details.html?detail_url=' + details_url;

                listItem.innerHTML = `
                <a href="${a_href}">
                    <div class="single-list-topics-content" style="text-align: center;">
                        <div class="single-list-topics-icon">
                            <i class="">
                                <img src="${pet.photoUrl}" alt="">
                            </i>
                        </div>
                        <p>${pet.name}</p>
                        <p>${pet.breed}</p>
                    </div>
                </a>
                `;

                const a = document.createElement('a');

                a.textContent = 'Details';

                petul.appendChild(listItem);
                listingsContainer.appendChild(petul);
            });
        }

        // Call the fetchData function
        // fetchData();

    </script>

    <script>
        async function performSearch() {
            what = document.getElementById('searchInput_what').value;
            geo = document.getElementById('searchInput_location').value;
            console.log(what, geo)
            if (!geo) {
                geo = '60616'
            }
            if (!what){
                what = 'dog'
            }
                try {
                    const response = await fetch(`https://api-staging.adoptapet.com/search/pet_search?key=hg4nsv85lppeoqqixy3tnlt3k8lj6o0c&v=3&output=json&city_or_zip=${geo}&geo_range=50&species=${what}`);

                    if (response.ok) {
                        const data = await response.json();

                        const myDiv = document.getElementById('petList');
                        myDiv.innerHTML = '';

                        displayData(data);
                        document.getElementById('list-topics').scrollIntoView({ behavior: 'smooth', block: 'top' });
                        
                    } else {
                        console.error('Error fetching data:', response.status);
                    }
                } catch (error) {
                    console.error('Error occurred:', error);
                }

        }

        var searchInput_what = document.getElementById("searchInput_what");
        searchInput_what.addEventListener("keydown", function (e) {
            if (e.key === "Enter") {
                performSearch();
            }
        });
        var searchInput_location = document.getElementById("searchInput_location");
        searchInput_location.addEventListener("keydown", function (e) {
            if (e.key === "Enter") {
                performSearch();
            }
        });
    </script>

    <style>
        .pet-list {
            display: flex;
            flex-wrap: wrap;
        }
        .pet-item {
            width: 200px;
            margin: 10px;
            text-align: center;
        }
        .pet-item img {
            max-width: 100%;
            height: auto;
        }
    </style>
</body>
</html>
